"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();angular.module("mainApp",["ngRoute"]);var SetRoutesConfig=function(e){e.when("/",{controller:"MainController",controllerAs:"vm",templateUrl:"src/templates/main.html"}).when("/showtimes",{controller:"ShowtimesController",controllerAs:"vm",templateUrl:"src/templates/showtimes.html"}).when("/cinemas",{controller:"MainController",controllerAs:"vm",templateUrl:"src/templates/cinemas.html"}).when("/booking/:cinemaId/:movieId/:watchType/:time/:day/:dayName/:month",{controller:"BookingController",controllerAs:"vm",templateUrl:"src/templates/booking.html"})};SetRoutesConfig.$inject=["$routeProvider"],angular.module("mainApp").config(SetRoutesConfig),angular.module("mainApp").factory("moviesFactory",function(){var e={},t=[{id:1,name:"Глибоководний горизонт",originName:"Deepwater Horizon",year:2016,country:"США",genre:"бойовик, трилер, драма",time:"106 хв",directedBy:"Пітер Берг",imgUrl:"src/img/deepwater.jpg",description:"Видобуток нафти передбачає розробку нових родовищ. У 2009 році нафтова платформа пробурила в Мексиканській затоці унікальну за глибиною свердловину. У процесі цементування десятикілометрової свердловини сталася аварія. Для 126 осіб, які перебували в цей час на платформі, вибух нафти став найстрашнішою подією в їхньому житті."},{id:2,name:"Чудова сімка",originName:"The Magnificent Seven",year:2016,country:"США",genre:"бойовик, вестерн",time:"132 хв",directedBy:"Антуан Фукуа",imgUrl:"src/img/seven.jpg",description:"Дії розгортаються на кордоні США та Мексики наприкінці ХІХ століття. Жителі маленького села вже звикли перебувати в постійному страху. Регулярно сюди навідується банда, яка грабує і вбиває. Останньою надією жителів села стають семеро найманців, готових за гроші вбити знахабнілих бандитів. На чолі сміливців – Сем (Дензел Вашингтон), відомий мисливець за головами."},{id:3,name:"Дев'яте життя Луї Дракса",originName:"The 9th Life of Louis Drax",year:2016,country:"США, Великобританія, Канада",genre:"трилер, детектив",time:"108 хв",directedBy:"Олександр Ажа",imgUrl:"src/img/drax.jpg",description:"Головний герой фільму – дев'ятирічний хлопчик на ім'я Луї Дракс. Святкування чергового дня народження обернулося для нього трагедією. Він упав із високої кручі у воду. Усі видимі обставини вказували на те, що хлопчина мав би померти. Але Луї Дракс вижив, хоча й досі перебуває в глибокій комі. За словами доктора Аллана Паскаля (Джеймі Дорнан), багато хто не хоче прокидатися саме тому, що вві сні почувається в безпеці. Що ж таке може знати хлопчик, що йому простіше бути в комі, аніж повернутися до повноцінного життя?"},{id:4,name:"Дитинство лідера",originName:"The Childhood of a Leader",year:2015,country:"Великобританія, Франція, Бельгія",genre:"драма, жахи, детектив",time:"115 хв",directedBy:"Брейді Корбет",imgUrl:"src/img/leader.jpg",description:"Події драми розгортаються у Франції в 1918 році. У родині американського дипломата (Ліам Каннінгем) та його дружини (Береніс Бежо) підростає син на ім'я Прескотт (Том Світ, Роберт Паттінсон). Стаючи мимовільним свідком ділових розмов батька, хлопчик формує своє ставлення до світового порядку. Разом з цим, надмірний деспотизм батьків призводить до того, що з Прескотта виростає тиран і диктатор, рівних якому світ ще не бачив."},{id:5,name:"Лелеки",originName:"Storks",year:2015,country:"США",genre:"мультфільм, комедія, сімейний",time:"86 хв",directedBy:"Ніколас Столлер, Даг Світленд",imgUrl:"src/img/storks.jpg",description:"Новий оригінальний погляд на легенду про лелек, які приносять новонароджених дітей, можна переглянути в мультфільмі. Сучасні пернаті друзі також йдуть в ногу з часом: тепер вони не літають, аби віднести дитинча своїм батькам, а займаються доставкою малечі через Інтернет. Однак коли лелека на ім’я Молодший випадково створює несанкціоновану дівчинку, він має виправити ситуацію, перш ніж хтось дізнається."}];return e.getMovies=function(){return t},e.getMovieById=function(e){var n=void 0;return t.some(function(t){var o=!1;return t.id==e&&(o=!0,n=t),o}),n},e}),angular.module("mainApp").factory("cinemasFactory",function(){var e={},t=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,e),this.time=t,angular.isArray(n)?this.isBooked=n:this.isBooked=[]},n=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2d",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,e),this.type=t,angular.isArray(n)?this.showtimes=n:this.showtimes=[]},o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];_classCallCheck(this,e),this.id=t,angular.isArray(n)?this.watchTypes=n:this.watchTypes=[]},r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{rows:0,places:0},s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";_classCallCheck(this,e),this.id=t,this.name=n,this.address=o,this.description=a,this.hallSize=l,this.workTime=i,this.imgUrl=s,angular.isArray(r)?this.moviesShowtime=r:this.moviesShowtime=[]}return _createClass(e,[{key:"getMovieWatchTypes",value:function(e){var t=[];return this.moviesShowtime.forEach(function(n){n.id==e&&(t=n.watchTypes)}),t}}]),e}(),i=[new o(1,[new n("2d",[new t("10:15",[{day:"04",places:[{row:1,place:1},{row:1,place:2}]}]),new t("15:20"),new t("16:35"),new t("20:10"),new t("20:45")]),new n("4dx",[new t("12:30"),new t("17:15"),new t("22:00")])]),new o(2,[new n("2d",[new t("12:45"),new t("17:30"),new t("21:45")]),new n("4dx",[new t("10:00"),new t("14:45"),new t("19:30")])]),new o(3,[new n("2d",[new t("12:30"),new t("19:30")])]),new o(4,[new n("2d",[new t("22:00")])]),new o(5,[new n("2d",[new t("10:15"),new t("14:45")]),new n("3d",[new t("13:50"),new t("17:40"),new t("18:50")])])],a=[new o(1,[new n("2d",[new t("10:40"),new t("19:00")])]),new o(2,[new n("2d",[new t("12:40"),new t("21:00")])]),new o(5,[new n("3d",[new t("15:00")])])],l=[new r(1,"Планета Кіно 4DX",'м. Львів, вул. Під Дубом, 7А, ТРЦ "Forum Lviv"',i,"З 10:00 Каси і Кіномаркет — до початку останнього сеансу Гардероб — до 22:00",'У самому центрі Львова у 900 метрах від Оперного театру ми відкрили надсучасний кінотеатр Планета Кіно. Він знаходиться у ТРЦ "Forum Lviv" на вул. Під Дубом, 7А, на третьому поверсі та має кінозал з технологією 4DX та ще 5 залів покращеного комфорту. Тут класне все: дизайн, технології, розташування, обслуговування, Кіномаркет.',{rows:10,places:15},"src/img/lviv-forum.jpg"),new r(2,"Кінопалац ім. Довженка","м. Львів, просп. Червоної Калини, 81",a,"З 10:00 Каси і Кіномаркет — до початку останнього сеансу Гардероб — до 22:00","Синій (новий, комфортний) зал на 196, обладнаний звуковою системою DOLBY DIGITAL SURROUND, акустикою «JBL», панорамним сучасним екраном Perlux.",{rows:10,places:15},"src/img/kinopalace_dovzhenka.jpg")];return e.getCinemas=function(){return l},e.getCinemaById=function(e){var t=void 0;return l.some(function(n){var o=!1;return n.id==e&&(o=!0,t=n),o}),t},e}),angular.module("mainApp").factory("datesFactory",function(){var e={},t=[new Date(2016,8,30),new Date(2016,9,1),new Date(2016,9,2),new Date(2016,9,3),new Date(2016,9,4),new Date(2016,9,5)],n=function(e,t){var n=!1,o=e.getMonth(),r=t.getMonth();return o>r?n=!0:o===r&&(n=e.getDate()>=t.getDate()),n};return e.getActualDates=function(){var e=[],o=new Date;return e=t.filter(function(e){var t=n(e,o);return t})},e.getformatedDate=function(e){var t=["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],n=e.getDate(),o=t[e.getDay()];n<10&&(n="0"+n);var r=["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],i=r[e.getMonth()];return{day:n,dayName:o,month:i}},e});var MainController=function(e,t){var n=this;n.movies=e.getMovies(),n.cinemas=t.getCinemas()};MainController.$inject=["moviesFactory","cinemasFactory"],angular.module("mainApp").controller("MainController",MainController);var ShowtimesController=function(e,t,n){var o=this;o.dates=e.getActualDates(),o.getformatedDate=e.getformatedDate,o.chosenDate=o.getformatedDate(o.dates[0]),o.chooseDate=function(e){o.chosenDate=o.getformatedDate(e)},o.movies=t.getMovies(),o.cinemas=n.getCinemas()};ShowtimesController.$inject=["datesFactory","moviesFactory","cinemasFactory"],angular.module("mainApp").controller("ShowtimesController",ShowtimesController);var BookingController=function(e,t,n,o){var r=this;r.cinema=o.getCinemaById(e.cinemaId);var i=e.movieId;r.movieName=n.getMovieById(i).name,r.watchType=e.watchType,r.time=e.time,r.date={day:e.day,dayName:e.dayName,month:e.month},r.cinema.getMovieWatchTypes(i).some(function(e){var t=!1;return e.type===r.watchType&&(t=!0,e.showtimes.some(function(e){var t=!1;return e.time===r.time&&(t=!0,r.showtime=e),t})),t}),r.isDisable=function(e,t){var n=!1;return r.showtime.isBooked.length&&r.showtime.isBooked.some(function(o){return o.day===r.date.day&&o.places.some(function(o){return o.row==e&&o.place==t&&(n="disabled btn-floating"),n}),n}),n},r.createArray=function(e){for(var t=[],n=1;n<=e;n++)t.push(n);return t},r.price=80,r.totalPrice=0,r.booked=[];var a=function(e,t){var n=void 0,o=r.booked.every(function(o,r){var i=o.row!==e||o.place!==t;return i||(n=r),i});if(o){var i={row:e,place:t};r.booked.push(i),r.totalPrice+=r.price}else r.booked.splice(n,1),r.totalPrice-=r.price};r.bookPlace=function(e,t,n){var o=angular.element(e.target);o.toggleClass("chosen-place"),o.hasClass("disabled")||a(t,n)},r.formHiden=!0,r.getForm=function(){r.booked.length&&(r.formHiden=!1)},r.endBooking=function(){r.booked.length&&(r.showtime.isBooked.push({day:r.day,places:r.booked}),r.formHiden=!0,t.path("/"))}};BookingController.$inject=["$routeParams","$location","moviesFactory","cinemasFactory"],angular.module("mainApp").controller("BookingController",BookingController);